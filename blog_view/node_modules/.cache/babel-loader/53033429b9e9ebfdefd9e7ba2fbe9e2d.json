{"remainingRequest":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\lee\\Desktop\\myblog\\blog_view\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\src\\store\\index.js","mtime":1651910115785},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\babel.config.js","mtime":1642908669323},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCB7IHNldFVzZXJEYXRhLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvcmVxdWVzdC90b2tlbic7CmltcG9ydCB7IGxvZ2luVG9CYWNrLCBsb2dvdXRGcm9tQmFjayB9IGZyb20gJ0AvYXBpcy91c2VyLmpzJzsKVnVlLnVzZShWdWV4KTsKZXhwb3J0IGRlZmF1bHQgbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB1c2VyOiB7fSwKICAgIGFydGljbGVzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfQVJUSUNMRVM6IGZ1bmN0aW9uIFNFVF9BUlRJQ0xFUyhzdGF0ZSwgYXJ0aWNsZXMpIHsKICAgICAgc3RhdGUuYXJ0aWNsZXMgPSBhcnRpY2xlczsKICAgIH0sCiAgICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHRva2VuKSB7CiAgICAgIGlmICh0b2tlbiAhPSBudWxsKSB7CiAgICAgICAgc3RhdGUudXNlci5pZCA9IHRva2VuLmlkOwogICAgICAgIHN0YXRlLnVzZXIuYWNjb3VudCA9IHRva2VuLmFjY291bnQ7CiAgICAgICAgc3RhdGUudXNlci5uaWNrbmFtZSA9IHRva2VuLm5pY2tuYW1lOwogICAgICAgIHN0YXRlLnVzZXIuc3RhdHVzID0gdG9rZW4uc3RhdHVzOwogICAgICB9CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvL+eZu+W9lQogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGxvZ2luVG9CYWNrKHVzZXIuYWNjb3VudCwgdXNlci5wYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCByZXNwb25zZS5kYXRhLmRhdGEpOyAvL+WtmOWCqOeUqOaIt+S/oeaBr+iHs+a1j+iniOWZqOe8k+WtmAoKICAgICAgICAgIHNldFVzZXJEYXRhKHJlc3BvbnNlLmRhdGEuZGF0YSk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICAvL+mAgOWHugogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIsIHN0YXRlKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGNvbnNvbGUubG9nKHN0YXRlKTsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBsb2dvdXRGcm9tQmFjayhzdGF0ZSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgbnVsbCk7CiAgICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9KTs="},{"version":3,"sources":["C:/Users/lee/Desktop/myblog/blog_view/src/store/index.js"],"names":["Vue","Vuex","setUserData","removeToken","loginToBack","logoutFromBack","use","Store","state","user","articles","mutations","SET_ARTICLES","SET_USER","token","id","account","nickname","status","actions","login","commit","Promise","resolve","reject","password","then","response","data","catch","error","logout","console","log"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAAQC,WAAR,EAAqBC,WAArB,QAAuC,iBAAvC;AACA,SAAQC,WAAR,EAAqBC,cAArB,QAA0C,gBAA1C;AAEAL,GAAG,CAACM,GAAJ,CAAQL,IAAR;AAEA,eAAe,IAAIA,IAAI,CAACM,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLC,IAAAA,IAAI,EAAC,EADA;AAELC,IAAAA,QAAQ,EAAE;AAFL,GADqB;AAK5BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,YADS,wBACIJ,KADJ,EACWE,QADX,EACoB;AAC3BF,MAAAA,KAAK,CAACE,QAAN,GAAiBA,QAAjB;AACD,KAHQ;AAITG,IAAAA,QAAQ,EAAE,kBAACL,KAAD,EAAQM,KAAR,EAAkB;AAC1B,UAAGA,KAAK,IAAI,IAAZ,EAAiB;AACfN,QAAAA,KAAK,CAACC,IAAN,CAAWM,EAAX,GAAgBD,KAAK,CAACC,EAAtB;AACAP,QAAAA,KAAK,CAACC,IAAN,CAAWO,OAAX,GAAqBF,KAAK,CAACE,OAA3B;AACAR,QAAAA,KAAK,CAACC,IAAN,CAAWQ,QAAX,GAAsBH,KAAK,CAACG,QAA5B;AACAT,QAAAA,KAAK,CAACC,IAAN,CAAWS,MAAX,GAAoBJ,KAAK,CAACI,MAA1B;AACD;AACF;AAXQ,GALiB;AAkB5BC,EAAAA,OAAO,EAAE;AAEP;AACAC,IAAAA,KAHO,uBAGSX,IAHT,EAGe;AAAA,UAAfY,MAAe,QAAfA,MAAe;AACpB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCpB,QAAAA,WAAW,CAACK,IAAI,CAACO,OAAN,EAAeP,IAAI,CAACgB,QAApB,CAAX,CAAyCC,IAAzC,CAA8C,UAAAC,QAAQ,EAAI;AACxDN,UAAAA,MAAM,CAAC,UAAD,EAAaM,QAAQ,CAACC,IAAT,CAAcA,IAA3B,CAAN,CADwD,CAExD;;AACA1B,UAAAA,WAAW,CAACyB,QAAQ,CAACC,IAAT,CAAcA,IAAf,CAAX;AACAL,UAAAA,OAAO;AACR,SALD,EAKGM,KALH,CAKS,UAAAC,KAAK,EAAI;AAChBN,UAAAA,MAAM,CAACM,KAAD,CAAN;AACD,SAPD;AAQD,OATM,CAAP;AAUD,KAdM;AAgBP;AACAC,IAAAA,MAjBO,yBAiBUvB,KAjBV,EAiBiB;AAAA,UAAhBa,MAAgB,SAAhBA,MAAgB;AACtBW,MAAAA,OAAO,CAACC,GAAR,CAAYzB,KAAZ;AACA,aAAO,IAAIc,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCnB,QAAAA,cAAc,CAACG,KAAD,CAAd,CAAsBkB,IAAtB,CAA2B,UAAAE,IAAI,EAAI;AACjCI,UAAAA,OAAO,CAACC,GAAR,CAAYL,IAAZ;AACAP,UAAAA,MAAM,CAAC,UAAD,EAAa,IAAb,CAAN;AACAlB,UAAAA,WAAW;AACXoB,UAAAA,OAAO;AACR,SALD,EAKGM,KALH,CAKS,UAAAC,KAAK,EAAI;AAChBN,UAAAA,MAAM,CAACM,KAAD,CAAN;AACD,SAPD;AAQD,OATM,CAAP;AAUD;AA7BM;AAlBmB,CAAf,CAAf","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport {setUserData, removeToken} from '@/request/token'\r\nimport {loginToBack, logoutFromBack} from '@/apis/user.js'\r\n\r\nVue.use(Vuex);\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    user:{},\r\n    articles: [],\r\n  },\r\n  mutations: {\r\n    SET_ARTICLES(state, articles){\r\n      state.articles = articles\r\n    },\r\n    SET_USER: (state, token) => {\r\n      if(token != null){\r\n        state.user.id = token.id;\r\n        state.user.account = token.account;\r\n        state.user.nickname = token.nickname;\r\n        state.user.status = token.status;\r\n      }\r\n    },\r\n  },\r\n  actions: {\r\n\r\n    //登录\r\n    login({commit}, user) {\r\n      return new Promise((resolve, reject) => {\r\n        loginToBack(user.account, user.password).then(response => {\r\n          commit('SET_USER', response.data.data)\r\n          //存储用户信息至浏览器缓存\r\n          setUserData(response.data.data)\r\n          resolve()\r\n        }).catch(error => { \r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    //退出\r\n    logout({commit}, state) {\r\n      console.log(state)\r\n      return new Promise((resolve, reject) => {\r\n        logoutFromBack(state).then(data => {\r\n          console.log(data)\r\n          commit('SET_USER', null)\r\n          removeToken()\r\n          resolve()\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    \r\n\r\n  }\r\n\r\n})\r\n"]}]}